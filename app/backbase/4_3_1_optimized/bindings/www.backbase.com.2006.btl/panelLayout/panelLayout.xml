<?xml version="1.0" encoding="UTF-8"?><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.backbase.com/2006/btl" xmlns:bb="http://www.backbase.com/2006/client" xmlns:d="http://www.backbase.com/2006/tdl"><d:namespace name="http://www.backbase.com/2006/btl"><d:uses element="positionElement dimensionElement containerElement" src="../visualElement/visualElement.xml"/><d:element name="panelLayout" extends="b:positionElement b:dimensionElement"><d:resource type="text/javascript"><![CDATA[btl.panelLayout={};btl.panelLayout.UNITS_NORMAL=1;btl.panelLayout.UNITS_PERCENTAGE=2;btl.panelLayout.UNITS_MIXED=3;btl.panelLayout.define=function(oController,oDim){var oOldDim=oController.getProperty('dimensions');var oChildren=[];var oChild=oController.getProperty('firstChild');while(oChild){if(bb.instanceOf(oChild,btl.namespaceURI,'panelLayoutItem')||bb.instanceOf(oChild,btl.namespaceURI,'panelLayout')){oChildren.push(oChild);}oChild=oChild.getProperty('nextSibling');}if(btl.panelLayout.testIfTidyRequired(oOldDim,oDim)){var oParentElm=oController.viewNode;var oContLen;var oContainerDiv;if(oOldDim.iLeadUnit==btl.panelLayout.UNITS_PERCENTAGE){oContainerDiv=oParentElm.removeChild(oParentElm.lastChild);oContLen=oContainerDiv.childNodes.length;for(var i=0;i<oContLen;i++){oParentElm.appendChild(oContainerDiv.childNodes[0]);}}else{oContainerDiv=oParentElm.removeChild(oParentElm.firstChild);var oOrigFirstChild=oParentElm.firstChild;oContLen=oContainerDiv.childNodes.length;for(var i=0;i<oContLen;i++){oParentElm.insertBefore(oContainerDiv.childNodes[0],oOrigFirstChild);}}}oController.setProperty('dimensions',oDim);if(oDim.aDimensions.length!=oChildren.length){throw ['Number of panels doesnt match attribute value',oDim.aDimensions.length];}btl.panelLayout.setPanelLayoutDefaultStyles(oController.viewNode);if(bb.browser.ie){oController.viewNode.style.padding='';}switch(oDim.iUnitType){case btl.panelLayout.UNITS_NORMAL:btl.panelLayout.definePanelNormal(oChildren,oController,oDim);break;case btl.panelLayout.UNITS_PERCENTAGE:btl.panelLayout.definePanelPercentage(oChildren,oController,oDim);break;case btl.panelLayout.UNITS_MIXED:btl.panelLayout.definePanelMixed(oChildren,oController,oDim);break;}if(bb.browser.ie){document.body.scrollIntoView(true);}};btl.panelLayout.parseDimensions=function(arrSplit,sStyle1D,sStyle1D_Inverse,sStyle1DSecond,sStyle2D){var oDims={};var iTrailUnit;oDims.aDimensions=[];oDims.iUnitType=null;oDims.sStyle1D=sStyle1D;oDims.sStyle1D_Inverse=sStyle1D_Inverse;oDims.sStyle1DSecond=sStyle1DSecond;oDims.sStyle2D=sStyle2D;oDims.bContainerStable=false;var arrRxOutput;for(var i=0;i<arrSplit.length;i++){if(arrSplit[i]){if(arrSplit[i]=='*'){arrRxOutput=['*',null,'*'];oDims.iStar=oDims.aDimensions.length;}else{arrRxOutput=arrSplit[i].match(/^([0-9]*\.)?[0-9]+(.*)/);if(!arrRxOutput){throw ['parse mixing general'];}if(!arrRxOutput[2]){arrRxOutput[0]+='px';arrRxOutput[2]='px';}}oDims.aDimensions[oDims.aDimensions.length]=[arrRxOutput[0],arrRxOutput[2]];}}var sPrevUnit=null;var iCheckAgainst,iCheckAgainst_Inverse,sCurrUnit;for(var j=0;j<oDims.aDimensions.length;j++){sCurrUnit=oDims.aDimensions[j][1];if(sCurrUnit!='*'){if(sCurrUnit=='%'){iCheckAgainst=btl.panelLayout.UNITS_NORMAL;iCheckAgainst_Inverse=btl.panelLayout.UNITS_PERCENTAGE;}else{iCheckAgainst=btl.panelLayout.UNITS_PERCENTAGE;iCheckAgainst_Inverse=btl.panelLayout.UNITS_NORMAL;}switch(oDims.iUnitType){case iCheckAgainst:if(oDims.iStar&&oDims.iStar==j-1){oDims.iUnitType=btl.panelLayout.UNITS_MIXED;oDims.iLeadUnit=iCheckAgainst;iTrailUnit=iCheckAgainst_Inverse;}else{throw ['parse mixing'];}break;case btl.panelLayout.UNITS_MIXED:if(iTrailUnit!=iCheckAgainst_Inverse){throw ['parse mixing'];}if(sPrevUnit&&sPrevUnit!=sCurrUnit){throw ['parse mixing'];}break;case iCheckAgainst_Inverse:if(sPrevUnit&&sPrevUnit!=sCurrUnit){throw ['parse mixing'];}break;default:oDims.iUnitType=iCheckAgainst_Inverse;break;}sPrevUnit=sCurrUnit;}else{sPrevUnit=null;}}if(!oDims.iUnitType){oDims.iUnitType=btl.panelLayout.UNITS_PERCENTAGE;}return oDims;};btl.panelLayout.setPanelLayoutDefaultStyles=function btl_panelLayout_setPanelLayoutDefaultStyles(oElm){var oController=oElm.controller;var oParent=oController?oController.getProperty('parentNode'):null;if(oController&&oParent&&!bb.instanceOf(oParent,btl.namespaceURI,'panelLayout')){}else{oElm.style.position='absolute';oElm.style.height='100%';oElm.style.width='100%';if(!oElm.style.overflow){if(oController&&oParent&&bb.instanceOf(oParent,btl.namespaceURI,'panelLayout')){oElm.style.overflow='hidden';}else{oElm.style.overflow='auto';}}}};btl.panelLayout.definePanelPercentage=function btl_panelLayout_definePanelPercentage(oChildren,oController,oDim){var iCulm2D=0,i2D,oStyle,oLL;for(var i=0;i<oChildren.length;i++){oLL=oChildren[i];btl.panelLayout.resetStyle(oLL.viewNode);i2D=oDim.iStar==i?btl.panelLayout.diffStar(oDim,0,oDim.aDimensions.length-1):oDim.aDimensions[i][0];var oStyle=oLL.viewNode.style;oStyle[oDim.sStyle1D]=iCulm2D+'%';oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseInt(i2D,10);}};btl.panelLayout.definePanelNormal=function btl_panelLayout_definePanelNormal(oChildren,oController,oDim){var iCulm2D=0,oStyle,oLL,i2D,i;if(oDim.iStar>=0){var oPadding=new btl.panelLayout.padding;var sUnit='';for(i=0;i<oDim.iStar;i++){oLL=oChildren[i];btl.panelLayout.resetStyle(oLL.viewNode);i2D=oDim.aDimensions[i][0];sUnit=oDim.aDimensions[i][1];oStyle=oLL.viewNode.style;oStyle[oDim.sStyle1D]=iCulm2D+sUnit;oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseFloat(i2D);}oPadding[oDim.sStyle1D]=iCulm2D+sUnit;iCulm2D=0;sUnit='';for(i=oDim.aDimensions.length-1;i>oDim.iStar;i--){oLL=oChildren[i];btl.panelLayout.resetStyle(oLL.viewNode);i2D=oDim.aDimensions[i][0];sUnit=oDim.aDimensions[i][1];oStyle=oLL.viewNode.style;oStyle[oDim.sStyle1DSecond]=iCulm2D+sUnit;oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseFloat(i2D);oStyle.top='';oStyle.left='';oStyle[oDim.sStyle1D_Inverse]='0px';}oPadding[oDim.sStyle1DSecond]=iCulm2D+sUnit;oController.viewNode.style.padding=btl.panelLayout.getPaddingString(oPadding);btl.panelLayout.resetStyle(oChildren[oDim.iStar].viewNode);oChildren[oDim.iStar].viewNode.style.position='relative';}else{for(i=0;i<oChildren.length;i++){oLL=oChildren[i];btl.panelLayout.resetStyle(oLL.viewNode);i2D=oDim.aDimensions[i][0];oStyle=oLL.viewNode.style;oStyle[oDim.sStyle1D]=iCulm2D+oDim.aDimensions[i][1];oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseFloat(i2D);}}};btl.panelLayout.definePanelMixed=function btl_panelLayout_definePanelMixed(oChildren,oController,oDim){var oNonPercDiv,oStyle;var bPercentTop=oDim.iLeadUnit===btl.panelLayout.UNITS_PERCENTAGE;var iPercentStart=(bPercentTop)?0:oDim.iStar;var iPercentEnd=(bPercentTop)?oDim.iStar:oDim.aDimensions.length-1;var iCulm2D=0,sUnit='',oLL,i2D,oPadding=new btl.panelLayout.padding;for(var i=iPercentStart;i<=iPercentEnd;i++){oLL=oChildren[i];if(i==oDim.iStar){var oNewDiv=document.createElement('div');oNewDiv.setAttribute('class','btl-panel');oNonPercDiv=oDim.bContainerStable?oLL.viewNode.parentNode:oController.viewNode.insertBefore(oNewDiv,oChildren[i+1].viewNode);btl.panelLayout.setPanelLayoutDefaultStyles(oNonPercDiv);i2D=btl.panelLayout.diffStar(oDim,iPercentStart,iPercentEnd);oStyle=oNonPercDiv.style;}else{btl.panelLayout.resetStyle(oLL.viewNode);i2D=oDim.aDimensions[i][0];oStyle=oLL.viewNode.style;}oStyle[oDim.sStyle1D]=iCulm2D+'%';oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseFloat(i2D);}iCulm2D=0;var oPrevElm=null;if(bPercentTop){for(var i=oDim.aDimensions.length-1;i>oDim.iStar;i--){oLL=oChildren[i];if(!oDim.bContainerStable){oController.viewNode.removeChild(oLL.viewNode);oNonPercDiv.insertBefore(oLL.viewNode,oPrevElm);}btl.panelLayout.resetStyle(oLL.viewNode);sUnit=oDim.aDimensions[i][1];i2D=oDim.aDimensions[i][0];oStyle=oLL.viewNode.style;oStyle[oDim.sStyle1DSecond]=iCulm2D+sUnit;oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseFloat(i2D);oStyle[oDim.sStyle1D_Inverse]='0px';oPrevElm=oLL.viewNode;}oPadding[oDim.sStyle1DSecond]=iCulm2D+sUnit;}else{for(var i=0;i<oDim.iStar;i++){oLL=oChildren[i];if(!oDim.bContainerStable){oController.viewNode.removeChild(oLL.viewNode);oNonPercDiv.appendChild(oLL.viewNode);}btl.panelLayout.resetStyle(oLL.viewNode);sUnit=oDim.aDimensions[i][1];i2D=oDim.aDimensions[i][0];oStyle=oLL.viewNode.style;oStyle[oDim.sStyle1D]=iCulm2D+sUnit;oStyle[oDim.sStyle2D]=i2D;iCulm2D+=parseFloat(i2D);}oPadding[oDim.sStyle1D]=iCulm2D+sUnit;}oNonPercDiv.style.padding=btl.panelLayout.getPaddingString(oPadding);oLL=oChildren[oDim.iStar];if(!oDim.bContainerStable){oController.viewNode.removeChild(oLL.viewNode);oNonPercDiv.insertBefore(oLL.viewNode,oPrevElm);}btl.panelLayout.resetStyle(oLL.viewNode);oLL.viewNode.style.position='relative';};btl.panelLayout.diffStar=function btl_panelLayout_diffStar(oDim,iStart,iEnd){var arrDim=oDim.aDimensions;var iStar2D=100;for(var i=iStart;i<=iEnd;i++){if(i!=oDim.iStar){iStar2D-=parseInt(arrDim[i][0],10);}}return iStar2D+'%';};btl.panelLayout.padding=function btl_panelLayout_padding(){this.top='0px';this.right='0px';this.bottom='0px';this.left='0px';};btl.panelLayout.getPaddingString=function btl_panelLayout_getPaddingString(oObj){return oObj.top+' '+oObj.right+' '+oObj.bottom+' '+oObj.left;};btl.panelLayout.resetStyle=function btl_panelLayout_resetStyle(oElm){if(oElm.controller&&oElm.controller.getProperty('localName')=='panel'){oElm.style.position='absolute';oElm.style.height='100%';oElm.style.width='100%';if(!oElm.style.overflow){oElm.controller.viewGate.style.overflow='auto';}oElm.style.top='';oElm.style.left='';oElm.style.bottom='';oElm.style.right='';}else{btl.panelLayout.setPanelLayoutDefaultStyles(oElm);}};btl.panelLayout.testIfTidyRequired=function btl_panelLayout_testIfTidyRequired(oOldDim,oNewDim){if(oOldDim&&oOldDim.iUnitType==btl.panelLayout.UNITS_MIXED){var oOldArr=oOldDim.aDimensions;var oNewArr=oNewDim.aDimensions;if(oOldArr.length==oNewArr.length){for(var i=0;i<oOldArr.length;i++){if(oOldArr[i][1]!=oNewArr[i][1]){return true;}}}else{return true;}oNewDim.bContainerStable=true;}return false;};btl.panelLayout.debug=function btl_panelLayout_debug(arr,sMessage){sOutput='\n'+sMessage;sOutput='\nParentNode';sOutput+='\n'+'position: '+arr.style.position;sOutput+='\n'+'padding: '+arr.style.padding;sOutput+='\n';for(var i=0;i<arr.childNodes.length;i++){var oStyle=arr.childNodes[i].style;sOutput+='\n'+i+': '+arr.childNodes[i].id;sOutput+='\n'+'position: '+oStyle.position;sOutput+='\n'+'display: '+oStyle.display;sOutput+='\n'+'width: '+oStyle.width;sOutput+='\n'+'top: '+oStyle.top;sOutput+='\n'+'left: '+oStyle.left;sOutput+='\n';}alert(sOutput);};]]></d:resource><d:resource type="text/css"><![CDATA[.btl-panelLayout,.btl-panelLayoutItem{box-sizing:border-box;-moz-box-sizing:border-box;-khtml-box-sizing:border-box;height:100%;width:100%;}.btl-panelLayout{position:relative;overflow:hidden;}.btl-panelLayoutItem{overflow:auto;}.HTML-btl-panelLayout-fullScreen,.HTML-btl-panelLayout-fullScreen BODY{padding:0;margin:0;}.btl-panelLayout-fullScreen{position:absolute;width:100%;height:100%;top:0;left:0;}]]></d:resource><d:template type="application/xhtml+xml"><div class="btl-panelLayout"><d:content/></div></d:template><d:attribute name="rows"><d:mapper type="text/javascript"><![CDATA[btl.panelLayout.define(this,btl.panelLayout.parseDimensions(value.split(' '),'top','left','bottom','height'));]]></d:mapper></d:attribute><d:attribute name="columns"><d:mapper type="text/javascript"><![CDATA[btl.panelLayout.define(this,btl.panelLayout.parseDimensions(value.split(' '),'left','top','right','width'));]]></d:mapper></d:attribute><d:attribute name="fullScreen"><d:mapper type="text/javascript"><![CDATA[if(btl.isTrueValue(name,value)){bb.html.addClass(this.viewNode,'btl-panelLayout-fullScreen');bb.html.addClass(document.documentElement,'HTML-btl-panelLayout-fullScreen');}else{bb.html.removeClass(this.viewNode,'btl-panelLayout-fullScreen');bb.html.removeClass(document.documentElement,'HTML-btl-panelLayout-fullScreen');}]]></d:mapper></d:attribute><d:property name="dimensions"/><d:constructor type="text/javascript"><![CDATA[var sMessage='';sMessage+='The http://www.backbase.com/2006/btl#panelLayout has been deprecated.';sMessage+=' Please use the http://www.backbase.com/2006/btl#panelSet instead.';bb.command.trace(this,sMessage);]]></d:constructor><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript"><![CDATA[if(!this.modelNode.getAttribute('columns')&&!this.modelNode.getAttribute('rows')||(this.modelNode.getAttribute('columns')&&this.modelNode.getAttribute('rows'))){bb.command.trace(this,'Either "columns" or "rows" attribute has to be defined!',2);}]]></d:handler></d:element><d:element name="panelLayoutItem" extends="b:containerElement"><d:template type="application/xhtml+xml"><div class="btl-panelLayoutItem"><d:content/></div></d:template></d:element></d:namespace></d:tdl>