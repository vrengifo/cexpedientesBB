<?xml version="1.0" encoding="UTF-8"?><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.backbase.com/2006/btl" xmlns:bb="http://www.backbase.com/2006/client" xmlns:d="http://www.backbase.com/2006/tdl"><d:namespace name="http://www.backbase.com/2006/btl"><d:uses element="element" src="../element/element.xml"/><d:element name="populatorBase" extends="b:element" abstract="true"><d:resource type="text/javascript"><![CDATA[btl.populator={};btl.populator.lazyLoad=function(eEvent){var oController=eEvent.currentTarget;var oPopulator=oController._._populator;if(oPopulator.getAttribute('type')!='always'){var aEvent=oPopulator.getProperty('events');for(var i=0,iMax=aEvent.length;iMax>i;i++){oController.removeEventListener(aEvent[i],btl.populator.lazyLoad,false);}}oPopulator.populate();};]]></d:resource><d:attribute name="events" default="select"/><d:attribute name="type" default="once"/><d:attribute name="url"/><d:property name="events"><d:getter type="text/javascript"><![CDATA[return this.getAttribute('events').split(' ');]]></d:getter></d:property><d:property name="url"><d:getter type="text/javascript"><![CDATA[return bb.uri.resolveUri(this.getAttribute('url'),this.getProperty('baseURI'));]]></d:getter></d:property><d:property name="loaded"/><d:property name="loadedNode"/><d:method name="populate"><d:body type="text/javascript"><![CDATA[var oParent=this.getProperty('parentNode');if(this.getProperty('loading')||!oParent){return;}var oLoadedNode=this.getProperty('loadedNode');if(oLoadedNode){this.setProperty('loadedNode',null);if(oLoadedNode._){bb.destruct(oLoadedNode);}}this.setProperty('loading',true);var oPopulator=this;setTimeout(function(){if(!oParent.viewNode){oPopulator.setProperty('loading',false);return;}bb.command.load(oPopulator.getProperty('url'),'GET',null,null,null,null,function(oRequest,oXmlElement){if(!oParent.viewNode||!oXmlElement){oPopulator.setProperty('loading',false);return;}bb.construct(oXmlElement,function(){var oElement=bb.getControllerFromModel(oXmlElement);oPopulator.setProperty('loading',false);var oNextSibling=oPopulator.getProperty('nextSibling');oParent.insertBefore(oElement,oNextSibling);oPopulator.setProperty('loadedNode',oElement);oPopulator.setProperty('loaded',true);bb.command.fireEvent(oParent,'load',false,false);});});},1);]]></d:body></d:method><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript"><![CDATA[var oParent=this.getProperty('parentNode');if(!oParent||oParent._._populator==this){return;}oParent._._populator=this;var aEvent=this.getProperty('events');for(var i=0,iMax=aEvent.length;iMax>i;i++){if(aEvent[i]=='DOMNodeInsertedIntoDocument'){setTimeout(function(){btl.populator.lazyLoad.call(oParent,{currentTarget:oParent,target:oParent});},10);}else{oParent.addEventListener(aEvent[i],btl.populator.lazyLoad,false);}}]]></d:handler><d:constructor type="text/javascript"><![CDATA[this.setProperty('loaded',false);]]></d:constructor></d:element><d:interface name="iPopulator"/></d:namespace></d:tdl>