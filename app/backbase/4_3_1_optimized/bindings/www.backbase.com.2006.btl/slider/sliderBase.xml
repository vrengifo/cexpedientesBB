<?xml version="1.0" encoding="UTF-8"?><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.backbase.com/2006/btl" xmlns:bb="http://www.backbase.com/2006/client" xmlns:d="http://www.backbase.com/2006/tdl"><d:namespace name="http://www.backbase.com/2006/btl"><d:uses element="rangeFormField" src="../rangeFormField/rangeFormField.xml"/><d:uses element="formList formListOption" src="../formList/formList.xml"/><d:uses element="positionElement dimensionElement" src="../visualElement/visualElement.xml"/><d:uses element="focusableElement" src="../focus/focus.xml"/><d:element name="sliderBase" extends="b:formList b:rangeFormField b:positionElement b:dimensionElement b:focusableElement" abstract="true"><d:resource type="text/javascript"><![CDATA[btl.slider={};btl.slider.handleMouseDown=function btl_slider_handleMouseDown(oSlider,eEvent){var self=this;var oGrippy=oSlider.getProperty('activeGrippy');oGrippy._.__oldValue=oGrippy.getProperty('value');if(btl.slider._mouseMove||btl.slider._mouseUp){this.handleMouseUp(oSlider,oGrippy,eEvent);}btl.slider._mouseMove=function(event){self.handleMouseMove(oSlider,oGrippy,event);};btl.slider._mouseUp=function(event){self.handleMouseUp(oSlider,oGrippy,event);};bb.document.addEventListener('mousemove',btl.slider._mouseMove,false);bb.document.addEventListener('mouseup',btl.slider._mouseUp,false);bb.html.addClass(oSlider.viewNode.getElementsByTagName('div')[1],'btl-slider-active');this.handleMouseMove(oSlider,oGrippy,eEvent);};btl.slider.handleMouseUp=function btl_slider_handleMouseUp(oSlider,oGrippy,eEvent){bb.document.removeEventListener('mousemove',btl.slider._mouseMove,false);bb.document.removeEventListener('mouseup',btl.slider._mouseUp,false);btl.slider._mouseUp=btl.slider._mouseMove=null;if(oGrippy.getProperty('value')!=oGrippy._.__oldValue){this.fireEvents(oGrippy,false,true);}bb.html.removeClass(oSlider.viewNode.getElementsByTagName('div')[1],'btl-slider-active');};btl.slider.handleMouseMove=function btl_slider_handleMouseMove(oSlider,oGrippy,eEvent){oGrippy.setPosition(this.getMousePosition(oSlider,oGrippy,eEvent),true);};btl.slider.incrementValue=function btl_slider_incrementValue(oSlider,oGrippy){oGrippy=oGrippy||oSlider.getFirstGrippy();var sValue=oGrippy.getProperty('value');var bIncremented=false;var aOptions=oSlider.getProperty('options');if(aOptions.length){for(var i=aOptions.length-1;i>=0;i--){if(sValue==aOptions[i].getProperty('value')){break;}}if(i>=0&&i+1<aOptions.length){sValue=aOptions[i+1].getProperty('value');bIncremented=true;}}else{var iStep=Number(oSlider.getAttribute('step'));var iMaxValue=Number(oSlider.getAttribute('max'));var iValue=Number(sValue)+iStep;if(iValue>iMaxValue){iValue=iMaxValue;}else{bIncremented=true;}sValue=iValue;}if(bIncremented){oGrippy.setProperty('value',sValue);}return bIncremented;};btl.slider.decrementValue=function btl_slider_decrementValue(oSlider,oGrippy){oGrippy=oGrippy||oSlider.getFirstGrippy();var sValue=oGrippy.getProperty('value');var bDecremented=false;var aOptions=oSlider.getProperty('options');if(aOptions.length){for(var i=aOptions.length-1;i>=0;i--){if(sValue==aOptions[i].getProperty('value')){break;}}if(i>=1){sValue=aOptions[i-1].getProperty('value');bDecremented=true;}}else{var iStep=Number(oSlider.getAttribute('step'));var iMinValue=Number(oSlider.getAttribute('min'));var iValue=Number(sValue)-iStep;if(iValue<iMinValue){iValue=iMinValue;}else{bDecremented=true;}sValue=iValue;}if(bDecremented){oGrippy.setProperty('value',sValue);}return bDecremented;};btl.slider.fireEvents=function btl_slider_fireEvents(oGrippy,bSlideEvent,bChangeEvent){var oEvent=null;if(bSlideEvent){oEvent=bb.document.createEvent('Events');oEvent.initEvent('slide',false,false);oGrippy.dispatchEvent(oEvent);}if(bChangeEvent){oEvent=bb.document.createEvent('Events');oEvent.initEvent('change',false,false);oGrippy.dispatchEvent(oEvent);}};btl.slider.getPrecision=function btl_slider_getPrecision(sNumber){return sNumber.length-((sNumber.indexOf('.')+1)||sNumber.length);};btl.slider.formatNumber=function btl_slider_formatNumber(iValue,sPrecision){var iPrecision=this.getPrecision(sPrecision);return iPrecision?iValue.toFixed(iPrecision):String(iValue);};btl.slider.setFillState=function btl_slider_setFillState(oSlider,bFill){var aGrippies=oSlider.getProperty('grippies');oSlider._.__updateFillArea=btl_slider_noAction;if(aGrippies.length<3&&bFill){oSlider._.__fillArea.style.display='';oSlider._.__updateFillArea=btl.slider.fillAreaUpdaters[String(aGrippies.length)];}else{oSlider._.__fillArea.style.display='none';}};btl.slider.fillAreaUpdaters={};btl.slider.fillAreaUpdaters['1']=function(oSlider){var oUtility=oSlider.getUtilityObject();var oFillArea=oSlider._.__fillArea;oUtility.setPosition(oFillArea,0);oUtility.setLength(oFillArea,oSlider._.__firstGrippy.getPosition());};btl.slider.fillAreaUpdaters['2']=function(oSlider){var oUtility=oSlider.getUtilityObject();var oFillArea=oSlider._.__fillArea;var iFirstGrippyPos=oSlider._.__firstGrippy.getPosition();oUtility.setPosition(oFillArea,iFirstGrippyPos);oUtility.setLength(oFillArea,oSlider._.__secondGrippy.getPosition()-iFirstGrippyPos);};function btl_slider_noAction(){return false;}btl.slider.getMousePosition=btl_slider_noAction;btl.slider.setPosition=btl_slider_noAction;btl.slider.getLength=btl_slider_noAction;btl.slider.getPosition=btl_slider_noAction;btl.slider.INC_KEY=btl.slider.DEC_KEY='';btl.slider.inherit=function(){var inheritant=function(){};inheritant.prototype=this;return new inheritant();};btl.horizontalSlider=btl.slider.inherit();btl.horizontalSlider.INC_KEY='Right';btl.horizontalSlider.DEC_KEY='Left';btl.horizontalSlider.getMousePosition=function btl_horizontalSlider_getMousePosition(oSlider,oGrippy,eEvent){var oContainerSize=bb.html.getBoxObject(oSlider._.__sliderScale);var oGrippySize=bb.html.getBoxObject(oGrippy.viewNode);var iPosition=eEvent.clientX+bb.viewport.scrollLeft-oContainerSize.left;iPosition-=Math.round(0.5*oGrippySize.width);return iPosition;};btl.horizontalSlider.getLength=function btl_horizontalSlider_getLength(oElement){return bb.html.getBoxObject(oElement).width;};btl.horizontalSlider.setLength=function btl_horizontalSlider_setLength(oElement,iLength){oElement.style.width=iLength+'px';return true;};btl.horizontalSlider.setPosition=function btl_horizontalSlider_setPosition(oElement,iCoord){oElement.style.left=iCoord+'px';return true;};btl.horizontalSlider.getPosition=function btl_horizontalSlider_getPosition(oElement){return parseInt(oElement.style.left,10)||0;};btl.verticalSlider=btl.slider.inherit();btl.verticalSlider.INC_KEY='Up';btl.verticalSlider.DEC_KEY='Down';btl.verticalSlider.getMousePosition=function btl_verticalSlider_getMousePosition(oSlider,oGrippy,eEvent){var oContainerSize=bb.html.getBoxObject(oSlider._.__sliderScale);var oGrippySize=bb.html.getBoxObject(oGrippy.viewNode);var iPosition=oContainerSize.height-(eEvent.clientY+bb.viewport.scrollTop-oContainerSize.top);iPosition-=Math.round(0.5*oGrippySize.height);return iPosition;};btl.verticalSlider.getLength=function btl_verticalSlider_getLength(oElement){return bb.html.getBoxObject(oElement).height;};btl.verticalSlider.setLength=function btl_verticalSlider_setLength(oElement,iLength){oElement.style.height=iLength+'px';return true;};btl.verticalSlider.setPosition=function btl_verticalSlider_setPosition(oElement,iCoord){oElement.style.bottom=iCoord+'px';return true;};btl.verticalSlider.getPosition=function btl_verticalSlider_getPosition(oElement){return parseInt(oElement.style.bottom,10)||0;};]]></d:resource><d:attribute name="orientation" default="horizontal"><d:mapper type="text/javascript"><![CDATA[bb.html.removeClass(this.viewNode,['btl-slider-vertical','btl-slider-horizontal']);bb.html.addClass(this.viewNode,'btl-slider-'+(value=='vertical'?'vertical':'horizontal'));if(value=='vertical'){this._.__sliderObj=btl.verticalSlider;}else{this._.__sliderObj=btl.horizontalSlider;}]]></d:mapper></d:attribute><d:attribute name="fill" default="false"><d:changer type="text/javascript"><![CDATA[btl.slider.setFillState(this,btl.isTrueValue(name,value));]]></d:changer></d:attribute><d:attribute name="min" default="0"/><d:attribute name="max" default="100"/><d:attribute name="showLabels" default="true"/><d:attribute name="showToolTip" default="true"/><d:attribute name="step" default="1"><d:changer type="text/javascript"><![CDATA[this.reflow();]]></d:changer></d:attribute><d:attribute name="snap" default="true"><d:changer type="text/javascript"><![CDATA[this.reflow();]]></d:changer></d:attribute><d:attribute name="value" onchange="this.setProperty('defaultValue', value)"/><d:property name="activeGrippy"><d:setter type="text/javascript"><![CDATA[if(!bb.instanceOf(value,btl.namespaceURI,'sliderGrippy')){return false;}var oldGrippy=this._['_activeGrippy'];if(oldGrippy){oldGrippy.deactivate();}value.activate();this._['_activeGrippy']=value;]]></d:setter></d:property><d:property name="defaultValue"><d:setter type="text/javascript"><![CDATA[this.getFirstGrippy().setProperty(name,value);]]></d:setter><d:getter type="text/javascript"><![CDATA[return this.getFirstGrippy().getProperty(name);]]></d:getter></d:property><d:property name="label"><d:setter type="text/javascript"><![CDATA[this.getFirstGrippy().setProperty(name,value);]]></d:setter><d:getter type="text/javascript"><![CDATA[return this.getFirstGrippy().getProperty(name);]]></d:getter></d:property><d:property name="options"><d:getter type="text/javascript"><![CDATA[var aChildren=this.getProperty('childNodes');var aReturn=[];for(var i=0,iMax=aChildren.length;iMax>i;i++){if(bb.instanceOf(aChildren[i],btl.namespaceURI,'formListOption')){aReturn[aReturn.length]=aChildren[i];}}return aReturn;]]></d:getter></d:property><d:property name="grippies"><d:getter type="text/javascript"><![CDATA[var aChildren=this.getProperty('childNodes');var aReturn=[];for(var iOption=0,iMax=aChildren.length;iMax>iOption;iOption++){if(bb.instanceOf(aChildren[iOption],btl.namespaceURI,'sliderGrippy')){aChildren[iOption]._.__index=aReturn.length;aReturn[aReturn.length]=aChildren[iOption];}}return aReturn;]]></d:getter></d:property><d:property name="value"><d:setter type="text/javascript"><![CDATA[this.getFirstGrippy().setProperty(name,value);]]></d:setter><d:getter type="text/javascript"><![CDATA[return this.getFirstGrippy().getProperty(name);]]></d:getter></d:property><d:method name="getUtilityObject"><d:body type="text/javascript"><![CDATA[return this._.__sliderObj;]]></d:body></d:method><d:method name="getFirstGrippy"><d:body type="text/javascript"><![CDATA[return this._.__firstGrippy;]]></d:body></d:method><d:method name="getInitialValue"><d:argument name="grippy"/><d:body type="text/javascript"><![CDATA[var sVal='';var aOptions=null;var iOption=null;if(grippy){sVal=grippy.getAttribute('value');}if(sVal===''&&grippy==this.getFirstGrippy()){sVal=this.getAttribute('value');}if(sVal===''){aOptions=this.getProperty('options');if(aOptions.length){iOption=aOptions.length-1;while(iOption>=0){if(aOptions[iOption].getAttribute('selected')){sVal=aOptions[iOption].getProperty('value');}--iOption;}if(!sVal&&sVal!==0){sVal=aOptions[0].getProperty('value');}}else{sVal=this.getAttribute('min');}}return sVal;]]></d:body></d:method><d:method name="addGrippy"><d:argument name="grippy" required="true"/><d:body type="text/javascript"><![CDATA[var oSlider=this;var oForSlider=grippy.getProperty('forSlider');if(oForSlider!=this){grippy.addEventListener('slide',function(event){var oEvent=bb.document.createEvent('Events');oEvent.initEvent('slide',false,false);return oSlider.dispatchEvent(oEvent);},false);grippy.addEventListener('change',function(event){var aGrippies=oSlider.getProperty('grippies');var iIndex=this._.__index||0;var iPos=this.getPosition();var oPrevGrippy=aGrippies[iIndex-1];var oNextGrippy=aGrippies[iIndex+1];if(oPrevGrippy){oPrevGrippy.restrictPosition(null,iPos);}if(oNextGrippy){oNextGrippy.restrictPosition(iPos,null);}var oEvent=bb.document.createEvent('Events');oEvent.initEvent('change',true,false);return oSlider.dispatchEvent(oEvent);},false);grippy.setProperty('forSlider',this);}]]></d:body></d:method><d:method name="getLength"><d:body type="text/javascript"><![CDATA[if(typeof this._.__length!='number'){this._.__length=this._.__sliderObj.getLength(this._.__sliderScale);}return this._.__length;]]></d:body></d:method><d:method name="correctToValue"><d:argument name="coord" type="number"/><d:body type="text/javascript"><![CDATA[if(!btl.isTrueValue('snap',this.getAttribute('snap'))){return coord;}var iValsCount=this.getProperty('options').length;if(!iValsCount){iValsCount=((this.getAttribute('max')-this.getAttribute('min'))/this.getAttribute('step'))||0;}else{--iValsCount;}var iMinDistance=(this.getLength()-this.getFirstGrippy().getLength())/iValsCount;if(iValsCount&&iMinDistance){coord=Math.round(Math.round(coord/iMinDistance)*iMinDistance);}return coord;]]></d:body></d:method><d:method name="translateValueToPosition"><d:argument name="value"/><d:body type="text/javascript"><![CDATA[var sDisplay=this.viewNode.style.display;if(sDisplay=='none'&&bb.browser.ie){this.viewNode.style.display='block';}var iScaleLength=this.getLength()-this.getFirstGrippy().getLength();if(sDisplay=='none'&&bb.browser.ie){this.viewNode.style.display=sDisplay;}var aOptions=this.getProperty('options');var iPosition=false,iValuesLength=aOptions.length-1,iOption=iValuesLength;var iMaxValue=0,iMinValue=0;if(aOptions.length){while(iOption>=0){if(value==aOptions[iOption].getProperty('value')){iPosition=iOption;break;}iOption--;}if(iPosition!==false){iPosition=Math.round((iScaleLength/iValuesLength)*iPosition);}}else{value=value!==''?Number(value):NaN;if(!isNaN(value)){iMinValue=Number(this.getAttribute('min'));iMaxValue=Number(this.getAttribute('max'));iValuesLength=iMaxValue-iMinValue;iPosition=Math.round((value-iMinValue)/iValuesLength*iScaleLength);}}return iPosition;]]></d:body></d:method><d:method name="getValueFromPosition"><d:argument name="position"/><d:body type="text/javascript"><![CDATA[var mValue=false;var iMaxDistance=this.getLength()-this.getFirstGrippy().getLength();var aOptions=this.getProperty('options');if(aOptions.length){var iIndex=Math.round((position/iMaxDistance)*(aOptions.length-1));if(iIndex<0){iIndex=0;}else{if(iIndex>=aOptions.length){iIndex=aOptions.length-1;}}mValue=aOptions[iIndex].getProperty('value');}else{var iMinValue=Number(this.getAttribute('min'));var iMaxValue=Number(this.getAttribute('max'));var sStep=this.getAttribute('step');var iStep=Number(sStep);var iMaxSteps=Math.ceil((iMaxValue-iMinValue)/iStep);mValue=Math.round((position/iMaxDistance)*iMaxSteps);mValue=mValue*iStep+iMinValue;mValue=Number(mValue);if(mValue<iMinValue){mValue=iMinValue;}if(mValue>iMaxValue){mValue=iMaxValue;}mValue=this._.__sliderObj.formatNumber(mValue,sStep);}return mValue;]]></d:body></d:method><d:method name="getScaleElement"><d:body type="text/javascript"/></d:method><d:method name="reflow"><d:body type="text/javascript"><![CDATA[this._.__length=null;var aGrippies=this.getProperty('grippies');var oGrippy=null;for(var iGrippy=0;aGrippies.length>iGrippy;++iGrippy){oGrippy=aGrippies[iGrippy];oGrippy.reflow();}var iMin=0,iMax=0,oPrevGrippy=null,oNextGrippy=null;var iScaleLength=this.getLength()-this.getFirstGrippy().getLength();for(var iGrippy=0;iGrippy<aGrippies.length;++iGrippy){iMin=0;iMax=iScaleLength;oGrippy=aGrippies[iGrippy];oPrevGrippy=aGrippies[iGrippy-1];oNextGrippy=aGrippies[iGrippy+1];iMin=oPrevGrippy?oPrevGrippy.getPosition():0;if(oNextGrippy){iMax=oNextGrippy.getPosition();iMax=(iMax<oGrippy.getPosition())?oGrippy.getPosition():iMax;iMax=(iMax>iScaleLength)?iScaleLength:iMax;}oGrippy.restrictPosition(iMin,iMax);}this._.__updateFillArea(this);]]></d:body></d:method><d:constructor type="text/javascript"><![CDATA[bb.html.disableUserSelect(this.viewNode);this._.__fillArea=bb.selector.query(this.viewNode,'.btl-slider-fillArea');this._.__sliderScale=this.getScaleElement();this._.__updateFillArea=btl_slider_noAction;var oSlider=this,aGrippies=this.getProperty('grippies');var oGrippy=aGrippies[0];if(!oGrippy){oGrippy=bb.document.createElementNS(btl.namespaceURI,'sliderGrippy');this.appendChild(oGrippy);aGrippies=[oGrippy];}this._.__firstGrippy=oGrippy;this._.__secondGrippy=aGrippies[1];for(var iGrippy=0;iGrippy<aGrippies.length;++iGrippy){this.addGrippy(aGrippies[iGrippy]);}oGrippy.addEventListener('change',function(event){oSlider.getProperty('focusElement').value=this.getProperty('value');},false);this.getProperty('focusElement').value=this.getInitialValue(oGrippy);this.setProperty('activeGrippy',oGrippy);btl.slider.setFillState(this,btl.isTrueValue('fill',this.getAttribute('fill')));]]></d:constructor><d:handler event="slide" type="text/javascript"><![CDATA[this._.__updateFillArea(this);]]></d:handler><d:handler event="construct" type="text/javascript"><![CDATA[this.setProperty('defaultValue',this.hasAttribute('value')?this.getAttribute('value'):this.getInitialValue());bb.ui.reflow.add(this);]]></d:handler><d:handler event="reflow" type="text/javascript"><![CDATA[this.reflow();]]></d:handler><d:handler event="keydown" type="text/javascript"><![CDATA[var oGrippy=this.getProperty('activeGrippy');if(event.keyIdentifier==this._.__sliderObj.INC_KEY){this._.__sliderObj.incrementValue(this,oGrippy);event.preventDefault();}else{if(event.keyIdentifier==this._.__sliderObj.DEC_KEY){this._.__sliderObj.decrementValue(this,oGrippy);event.preventDefault();}}]]></d:handler><d:handler event="mousedown" type="text/javascript"><![CDATA[this.focus();var oElm=event.viewTarget;while(oElm!=this.viewNode){if(bb.html.hasClass(oElm,'btl-slider-container')){this._.__sliderObj.handleMouseDown(this,event);break;}else{oElm=oElm.parentNode;}}]]></d:handler></d:element><d:element name="sliderGrippyBase" abstract="true"><d:attribute name="name"/><d:attribute name="value"><d:mapper type="text/javascript"><![CDATA[this.setProperty('defaultValue',value);]]></d:mapper></d:attribute><d:property name="label" type="string"><d:setter type="text/javascript"><![CDATA[this.getLabelElement().innerHTML=value;]]></d:setter><d:getter type="text/javascript"><![CDATA[return this.getLabelElement().innerHTML;]]></d:getter></d:property><d:property name="forSlider"><d:setter type="text/javascript"><![CDATA[if(value&&bb.instanceOf(value,btl.namespaceURI,'slider')){this._['_forSlider']=value;value.getScaleElement().appendChild(this.getToolTipElement());}]]></d:setter></d:property><d:property name="defaultValue" onset="this._['_defaultValue'] = value;"/><d:property name="value"><d:setter type="text/javascript"><![CDATA[var oSlider=this._['_forSlider'];var oUtility=oSlider.getUtilityObject();var iPos=oSlider.translateValueToPosition(value);var oldValue=this._['_value'];var iNewPos=iPos;if(iPos!==false){iNewPos=this.correctCoordinate(iPos);oUtility.setPosition(this.viewNode,iNewPos);if(iNewPos!=iPos){oldValue=value;value=oSlider.getValueFromPosition(iNewPos);}else{if(!oSlider.getProperty('options').length){value=oUtility.formatNumber(Number(value),oSlider.getAttribute('step'));}}this._['_value']=value;var aOptions=oSlider.getProperty('options');var iOptionIndex;for(var i=0,j=aOptions.length;i<j;i++){if(aOptions[i].getProperty('value')==value){aOptions[i].setProperty('selected',true);iOptionIndex=i;break;}}if(aOptions.length){var deselectOldOption=true;var aGrippies=oSlider.getProperty('grippies');for(var i=0,j=aGrippies.length;i<j;i++){if(aGrippies[i].getProperty('value')==oldValue){deselectOldOption=false;}}if(deselectOldOption){for(var i=0,j=aOptions.length;i<j;i++){if(aOptions[i].getProperty('value')==oldValue){aOptions[i].setProperty('selected',false);break;}}}}if(aOptions.length&&aOptions[iOptionIndex].getProperty('text')){this.setProperty('label',aOptions[iOptionIndex].getProperty('text'));}else{this.setProperty('label',value+'');}this.centerLabel();if(typeof oldValue!='undefined'&&oldValue!==value){oUtility.fireEvents(this,true,true);}this._.__inited=true;}]]></d:setter><d:getter type="text/javascript"><![CDATA[if(typeof this._['_value']=='undefined'){return this._['_forSlider'].getInitialValue(this);}return this._['_value'];]]></d:getter></d:property><d:method name="centerLabel"><d:body type="text/javascript"><![CDATA[var iCoord=this.getPosition();var oSlider=this._['_forSlider'];var oUtility=oSlider.getUtilityObject();var oToolTip=this.getToolTipElement();var iSliderScaleLength=oSlider.getLength();var iGrippyLength=this.getLength();var iLabelLength=oUtility.getLength(oToolTip);iCoord=parseInt(iCoord,10)-Math.round((iLabelLength-iGrippyLength)/2);if(iCoord<0){iCoord=0;}else{if(iCoord+iLabelLength>iSliderScaleLength){iCoord=iSliderScaleLength-iLabelLength;}}oUtility.setPosition(oToolTip,iCoord);return true;]]></d:body></d:method><d:method name="getLength"><d:body type="text/javascript"><![CDATA[if(typeof this._.__length!='number'){this._.__length=this._['_forSlider'].getUtilityObject().getLength(this.viewNode);}return this._.__length;]]></d:body></d:method><d:method name="restrictPosition"><d:argument name="min"/><d:argument name="max"/><d:body type="text/javascript"><![CDATA[min=parseInt(min,10);max=parseInt(max,10);if(!this._.__moveConstraints){this._.__moveConstraints={};}this._.__moveConstraints.min=isNaN(min)?this._.__moveConstraints.min:min;this._.__moveConstraints.max=isNaN(max)?this._.__moveConstraints.max:max;var iPos=this.getPosition();if(iPos>this._.__moveConstraints.max||iPos<this._.__moveConstraints.min){this.setPosition(iPos);}]]></d:body></d:method><d:method name="correctCoordinate"><d:argument name="coord" type="number"/><d:body type="text/javascript"><![CDATA[var oSlider=this._['_forSlider'];var sDisplay=oSlider.viewNode.style.display;if(sDisplay=='none'&&bb.browser.ie){oSlider.viewNode.style.display='block';}var oConstr=this._.__moveConstraints||{min:-10000,max:10000};if(sDisplay=='none'&&bb.browser.ie){oSlider.viewNode.style.display='none';}var iCoord=parseInt(coord,10);iCoord=oSlider.correctToValue(iCoord);if(iCoord<oConstr.min){iCoord=oConstr.min;}if(iCoord>oConstr.max){iCoord=oConstr.max;}return iCoord;]]></d:body></d:method><d:method name="setPosition"><d:argument name="position" type="number"/><d:argument name="noChangeEvent"/><d:body type="text/javascript"><![CDATA[var oSlider=this._['_forSlider'];var oldValue=this._['_value'];var oUtility=oSlider.getUtilityObject();position=this.correctCoordinate(position);oUtility.setPosition(this.viewNode,position);var sValue=oSlider.getValueFromPosition(position);this._['_value']=sValue;var aOptions=oSlider.getProperty('options');var iOptionIndex;for(var i=0,j=aOptions.length;i<j;i++){if(aOptions[i].getProperty('value')==sValue){aOptions[i].setProperty('selected',true);iOptionIndex=i;break;}}if(aOptions.length){var deselectOldOption=true;var aGrippies=oSlider.getProperty('grippies');for(var i=0,j=aGrippies.length;i<j;i++){if(aGrippies[i].getProperty('value')==oldValue){deselectOldOption=false;}}if(deselectOldOption){for(var i=0,j=aOptions.length;i<j;i++){if(aOptions[i].getProperty('value')==oldValue){aOptions[i].setProperty('selected',false);break;}}}}if(aOptions.length&&aOptions[iOptionIndex].getProperty('text')){this.setProperty('label',aOptions[iOptionIndex].getProperty('text'));}else{this.setProperty('label',sValue+'');}this.centerLabel();if(typeof oldValue!='undefined'&&oldValue!==sValue){oUtility.fireEvents(this,true,!noChangeEvent);}]]></d:body></d:method><d:method name="getPosition"><d:body type="text/javascript"><![CDATA[return this._['_forSlider'].getUtilityObject().getPosition(this.viewNode);]]></d:body></d:method><d:method name="getToolTipElement"><d:body type="text/javascript"><![CDATA[var oGrippy=this;if(!this._.__toolTip){this._.__toolTip=bb.getResource(this,'tooltip').cloneNode(true);bb.html.addEventListener(this._.__toolTip,'mousedown',function(event){oGrippy._['_forSlider'].setProperty('activeGrippy',oGrippy);},false);}return this._.__toolTip;]]></d:body></d:method><d:method name="getLabelElement"><d:body type="text/javascript"/></d:method><d:method name="activate"><d:body type="text/javascript"><![CDATA[bb.html.addClass(this.viewNode,['btl-slider-activeGrippy']);bb.html.addClass(this.getToolTipElement(),['btl-slider-activeCurrent']);]]></d:body></d:method><d:method name="deactivate"><d:body type="text/javascript"><![CDATA[bb.html.removeClass(this.viewNode,['btl-slider-activeGrippy']);bb.html.removeClass(this.getToolTipElement(),['btl-slider-activeCurrent']);]]></d:body></d:method><d:method name="reflow"><d:body type="text/javascript"><![CDATA[this._.__moveConstraints=null;this._.__length=null;var oSlider=this._['_forSlider'];var iPos=0;if(!this._.__inited){this.setProperty('value',oSlider.getInitialValue(this));this._.__inited=true;}else{this.setProperty('value',this.getProperty('value'));}]]></d:body></d:method><d:handler event="mousedown" type="text/javascript"><![CDATA[this._['_forSlider'].setProperty('activeGrippy',this);]]></d:handler><d:handler event="DOMNodeRemovedFromDocument" type="text/javascript"><![CDATA[var oTT=this.getToolTipElement();if(oTT){oTT.parentNode.removeChild(oTT);}]]></d:handler></d:element><d:element name="sliderOption" extends="b:formListOption"/></d:namespace></d:tdl>