<?xml version="1.0" encoding="UTF-8"?><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.backbase.com/2006/btl" xmlns:bb="http://www.backbase.com/2006/client"  xmlns:d="http://www.backbase.com/2006/tdl" >

	<d:namespace name="http://www.backbase.com/2006/btl">

		<d:uses element="positionElement" src="../visualElement/visualElement.xml"/>
		<d:uses element="dimensionElement" src="../visualElement/visualElement.xml"/>

		<d:element name="flash" extends="b:positionElement b:dimensionElement">
			
			<d:template type="text/javascript">
				var sSrc = bb.uri.resolveUri(this.getAttribute('src'), this.getProperty('baseURI'));
				var sHeight = this.getAttribute('height');
				this._._height = sHeight;
				var sWidth = this.getAttribute('width');

				var sSWF = '&lt;object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" type="application/x-shockwave-flash" codebase="http://active.macromedia.com/flash5/cabs/swflash.cab#version=6,0,0,0"';
				sSWF += ' height="'+sHeight+'" width="'+sWidth+'"';
				sSWF += '&gt;&lt;param name="wmode" value="transparent" /&gt;';
				sSWF += '&lt;param name="movie" value="'+sSrc+'" /&gt;';
				sSWF += '&lt;embed pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" swLiveConnect="true" wmode="transparent"';
				sSWF += ' style="height: '+sHeight+';width:'+sWidth+';"';
				sSWF += ' src="'+sSrc+'" /&gt;';
				sSWF += '&lt;/object&gt;';
				var oObj = bb.html.createElementFromString(sSWF);
				var oSpan = document.createElement('span');
				oSpan.style.display = 'none';
				try{
					oObj.insertBefore(oSpan, oObj.lastChild);
				}catch(e){}
				return [oObj, oSpan];
			
			</d:template>

			<d:attribute name="src">
				
				<d:changer type="text/javascript"><![CDATA[
					// @TODO: should not be relative to the startup file.. use resolveURI
					this.viewNode.Movie = value;
					if(this.viewNode.lastChild)
						this.viewNode.lastChild.src = value;
				]]></d:changer>
			</d:attribute>

			<d:attribute name="height">
				<!-- Empty mapper to overwrite the implementation of dimensionElement. -->
				<d:mapper type="text/javascript"/>
				<d:changer type="text/javascript"><![CDATA[
					this.setProperty(name, value);
				]]></d:changer>
			</d:attribute>

			<d:attribute name="width" onmap=""><!-- overriding mapper from super class -->
				<d:changer type="text/javascript"><![CDATA[
					this.viewNode.width = value;
					if(this.viewNode.lastChild)
						this.viewNode.lastChild.style.width = value;
				]]></d:changer>
			</d:attribute>

			<d:property name="height">
				<d:setter type="text/javascript"><![CDATA[
					this.viewNode.height = value;
					if (this.viewNode.lastChild)
						this.viewNode.lastChild.style.height = value;
					this._._height = value;
				]]></d:setter>
			</d:property>
		</d:element>
	</d:namespace>
</d:tdl>